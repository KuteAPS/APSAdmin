//初始化加载表格
! function (e, t, o) {
    "use strict";
    ! function () {
        var PageTable = o("#TableAdmin").bootstrapTable({
            url: '/SystemConfig/GetAllUserGroupList',         //请求后台的URL（*）
            method: 'get',
            //search: !0,
            pagination: !0,
            showRefresh: !0,
            showColumns: !0,
            iconSize: "outline",
            clickToSelect: true,
            strictSearch: true,
            showColumns: true,
            toolbar: "#exampleTableEventsToolbar",
            pagination: true,
            sidePagination: "server",
            columns: [{
                checkbox: true
            }, {
                field: 'id',
                title: 'ID',
                sortable: true
            }, {
                field: 'GroupName',
                title: '分组名称',
                sortable: true
            }, {
                field: 'GroupLock',
                title: '分组组锁',
                sortable: true,
                formatter: function (value, row, index) {
                    var e = value == 0 ? "正常" : "锁定";
                    return e;
                }
            }]
        });
    }()

    //删除信息
    $("#btn_Del").click(function () {
        PostData(TableAdmin, "/SystemConfig/DelUserGroupList", o, "#TableAdmin");
    });

    //编辑信息
    $("#btn_Edit").click(function () {
        var selects = $(TableAdmin).bootstrapTable('getSelections');
        var json = eval('(' + JSON.stringify(selects) + ')');

        if (selects.length !== 1) {
            ToastShow("操作提示", "选择信息不符合要求", 3000, "必须选中一条数据", "warning");
            return;
        }

        ToastShow("操作提示", "选择信息ID" + json[0].Id + "填充成功！", 3000, "成功填充值右侧编辑器，修改提交即可，如需新增请先点击重置按钮", "success");
        $("#id").val(json[0].Id);
        $("#groupName").val(json[0].GroupName);
        $("#thisId").removeAttr("hidden");
        $("#btn_sub").html("修改");
        $("#editTitle").html("修改分组信息");
        if (json[0].GroupLock == "-1") {
            $("#locked").prop("checked", true);
        } else {
            $("#locked").prop("checked", false);
        }
    });

    //重置信息
    $("#btn_reset").click(function () {
        $("#thisId").prop("hidden", true);
        $("#btn_sub").html("保存");
        $("#editTitle").html("新增分组信息");
    });

    //新增-更新
    $("#btn_submit").click(function (e) {

        var msg = layer.msg('正在执行中...', { icon: 16, shade: 0.1, time: 0 });
        $.post("/SystemConfig/AddOrUpdateUsersGroup", $("#signupForm").serialize(), function (data) {
            layer.close(msg);
            o(TableAdmin).bootstrapTable('refresh');
            AjaxDataToastShow(data);
        })
    });


}(document, window, jQuery);
