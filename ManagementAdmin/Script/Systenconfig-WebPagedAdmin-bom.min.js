! function (e, t, o) {
    "use strict";
    ! function () {
        o("#TableAdmin").bootstrapTable({
            url: '/SystemConfig/GetAllPagedList', //请求后台的URL（*）
            method: 'get',
            //search: !0,
            pagination: !0,
            showRefresh: !0,
            showColumns: !0,
            iconSize: "outline",
            clickToSelect: true,
            strictSearch: true,
            showColumns: true,
            toolbar: "#exampleTableEventsToolbar",
            pagination: true,
            sidePagination: "server",
            columns: [{
                checkbox: true
            }, {
                field: 'Id',
                title: 'ID',
                sortable: true
            }, {
                field: 'PageName',
                title: '页面名称',
                sortable: true
            }, {
                field: 'PageUrl',
                title: '页面URL',
                sortable: true
            }, {
                field: 'Locked',
                title: '页面锁',
                sortable: true,
                formatter: function (value, row, index) {
                    var e = value == 0 ? "锁定" : "正常";
                    return e;
                }
            }, {
                field: 'GroupId',
                title: '分组ID',
                sortable: true
            }, {
                field: 'ShowMenu',
                title: '左侧菜单',
                sortable: true,
                formatter: function (value, row, index) {
                    var e = value == 0 ? "显示" : "隐藏";
                    return e;
                }
            }, {
                field: 'Jurisdiction',
                title: '公开',
                sortable: true,
                formatter: function (value, row, index) {
                    var e = value == 0 ? "公开" : "权限分配";
                    return e;
                }
            }]
        });
    }()

    //删除信息
    $("#btn_Del").click(function () {
        PostData(TableAdmin, "/SystemConfig/DelWebPageList", o, "#TableAdmin");
    });

    //编辑信息
    $("#btn_Edit").click(function () {
        var selects = $(TableAdmin).bootstrapTable('getSelections');
        var json = eval('(' + JSON.stringify(selects) + ')');

        if (selects.length !== 1) {
            ToastShow("操作提示", "选择信息不符合要求", 3000, "必须选中一条数据", "warning");
            return;
        }

        ToastShow("操作提示", "选择信息ID" + json[0].Id + "填充成功！", 3000, "成功填充值右侧编辑器，修改提交即可，如需新增请先点击重置按钮", "success");
        $("#id").val(json[0].Id);
        $("#pageName").val(json[0].PageName);
        $("#pageUrl").val(json[0].PageUrl);

        $("#id").attr({ readonly: "true" });
        $("#btn_sub").html("修改");
        $("#editTitle").html("修改页面信息");


        $("#groupId option").each(function (i) {
            if (this.value == json[0].GroupId) {
                this.selected = true;
            }
        });



        if (json[0].Locked == "0") {
            $("#locked").prop("checked", true);
        } else {
            $("#locked").prop("checked", false);
        }

        if (json[0].ShowMenu == "0") {
            $("#showMenu").prop("checked", true);
        } else {
            $("#showMenu").prop("checked", false);
        }


        if (json[0].Jurisdiction == "0") {
            $("#jurisdiction").prop("checked", true);
        } else {
            $("#jurisdiction").prop("checked", false);
        }

        $(document).ready(function () { $(".i-checks").iCheck({ radioClass: "iradio_square-green" }) });
    });

    //获取页面分组列表
    $.post("/SystemConfig/GetWenGroupList", function (data) {
        var json = eval('(' + data + ')');
        var html = "";
        var select = "";
        var locked = "";
        if (json.Success != "success") {
            AjaxDataToastShow(data);
            return;
        }

        var GroupList = eval('(' + json.JsonMsg + ')');
        for (var i = 0; i < GroupList.length; i++) {
            var o = GroupList[i];

            html += ('<option value="' + o.Id + '" ' + select + '>' + o.GroupName + '</option>');
        }

        $("#groupId").html(html);
    })

    //重置信息
    $("#btn_reset").click(function () {
        $("#id").removeAttr("readonly");
        $("#btn_sub").html("保存");
        $("#editTitle").html("新增页面信息");
    });

    //新增-更新
    $("#btn_submit").click(function (e) {
        var msg = layer.msg('正在执行中...', { icon: 16, shade: 0.1, time: 0 });
        $.post("/SystemConfig/AddOrUpdateWebPage", $("#signupForm").serialize(), function (data) {
            layer.close(msg);
            o(TableAdmin).bootstrapTable('refresh');
            AjaxDataToastShow(data);
        })
    });
}(document, window, jQuery);
